
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Aubade_Blog</title>
        <meta name="author" content="Terrance">
        <meta name="description" content="Persisting will immortalizes freedom.">
        <meta name="keywords" content="">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
        <link rel="icon" href="/images/OIP.jpg">
        <script src="https://cdn.staticfile.org/vue/3.2.45/vue.global.prod.min.js"></script>
        <script src="https://cdn.staticfile.org/highlight.js/11.7.0/highlight.min.js"></script>
        <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/11.7.0/styles/github.min.css">
        <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.2.1/css/all.min.css">
        
        <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
        
        
        <script src="https://cdn.staticfile.org/KaTeX/0.16.4/katex.min.js"></script>
        <script src="https://cdn.staticfile.org/KaTeX/0.16.4/contrib/auto-render.min.js"></script>
        <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.16.4/katex.min.css">
        
        
        <link rel="stylesheet" href="/css/fonts.min.css">
        <link rel="stylesheet" href="/css/particlex.css">
    <meta name="generator" content="Hexo 6.3.0"></head>
    <body>
        <div id="loading" style="height: 100vh; width: 100vw; left: 0; top: 0; position: fixed; display: flex; z-index: 2147483647; background: #fff; transition: opacity 0.3s ease-out; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; pointer-events: none">
    <div style="width: 50vmin; height: 50vmin; margin: auto; padding: 50px; border-radius: 50%; display: flex; border: solid 10px #a3ddfb">
        <div style="margin: auto; text-align: center">
            <h2>LOADING</h2>
            <p>加载过慢请开启缓存，浏览器默认开启</p>
            <img src="/images/loading.gif" style="height: 50px; border-radius: 0">
        </div>
    </div>
</div>

        <div id="layout">
            <transition name="into">
            <div id="main" v-show="showpage" style="display: -not-none">
                <nav id="menu">
    <div class="desktop-menu">
        <a class="title" href="/">
            <span>AUBADE_BLOG</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </div>
    <div :class="&quot;phone-menu &quot; + menushow" id="phone-menu">
        <div class="curtain" @click="menushow = !menushow" v-show="menushow"></div>
        <div class="title" @click="menushow = !menushow">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;AUBADE_BLOG</span>
        </div>
        <transition name="slide">
        <div class="items" v-show="menushow">
            
            <a href="/">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-house fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-id-card fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-box-archive fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                </div>
            </a>
            
            <a href="/categories">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-bookmark fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                </div>
            </a>
            
            <a href="/tags">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-tags fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                </div>
            </a>
            
        </div>
        </transition>
    </div>
</nav>

                <div id="home-head">
    <div id="home-background" style="background-image: url(/images/bk.jfif)"></div>
    
    <div id="home-info" @click="homeclick">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>Aubade_Blog</h1>
                <h3></h3>
                <h5>Persisting will immortalizes freedom.</h5>
            </div>
        </span>
    </div>
    
</div>
<div id="home-posts-wrap" class="">
    <div id="home-posts">
        <div id="posts">
            

<div class="post">
    <a href="/2023/03/25/COMP310-Intro-to-FileSystems/">
        <h2 class="post-title">COMP310-Intro-to-FileSystems</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/COMP310/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                COMP310
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/3/25
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>OS &#x3D; Process Management + Memory Management + File System + I&#x2F;O</p>
<h2 id="I-x2F-O-Devices"><a href="#I-x2F-O-Devices" class="headerlink" title="I&#x2F;O Devices"></a>I&#x2F;O Devices</h2><p><img src="/.com//0.png" alt="I/O System Architecture"><br><strong>Buses Type</strong>:  </p>
<ul>
<li>PCIE (peripheral component interconnect express)<ul>
<li>PCIE is often used to connect to high performance devices</li>
</ul>
</li>
<li>DMI (Direct media interface)</li>
<li>USB (Universal serial bus)</li>
<li>eSATA (external SATA)<ul>
<li>SATA (Serial ATA)</li>
<li>ATA (the AT attachment, in reference to providing connection to the IBM PC AT)<blockquote>
<p><strong>Reason for the classification(architecture)</strong>  </p>
<ol>
<li>Physical significance<br>  Higher performance devices connected via high performance buses(wider and shorter)</li>
<li>To put a large number of devices into the system</li>
</ol>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="How-does-OS-communicate-with-I-x2F-O-devices"><a href="#How-does-OS-communicate-with-I-x2F-O-devices" class="headerlink" title="How does OS communicate with I&#x2F;O devices?"></a>How does OS communicate with I&#x2F;O devices?</h3><p>By <strong>Canonical Device Interface</strong>.<br><strong>Canonical Device Interface</strong>:<br>Interface made of 3 registers:</p>
<ul>
<li>Status - current status of device</li>
<li>Command - OS tells device what command to perform</li>
<li>Data - send&#x2F;receive data from device</li>
</ul>
<p><em>OS alters the registers to communicate with IO&#x2F;O devices</em></p>
<p><img src="/.com//1.png" alt="CDI(Canonical Device Interface)"><br>All the hidden internals are visible to the hardware but invisible to the OS.</p>
<h4 id="How-does-OS-use-device-interface"><a href="#How-does-OS-use-device-interface" class="headerlink" title="How does OS use device interface?"></a>How does OS use device interface?</h4><ul>
<li><p>DMA</p>
</li>
<li><p>Polling<br>OS waits untile the device is ready. Repeatedly checks the STATUS of the registers in a loop.  </p>
<ul>
<li>Pro: simple</li>
<li>Con: Wasted CPU cycles</li>
</ul>
</li>
<li><p>Interrupt<br>Put process requesting I&#x2F;O to <strong>sleep</strong>. -&gt; <strong>Context switch</strong> to a different process. -&gt; When I&#x2F;O finishes, wake sleeping process with an <strong>interrupt</strong>. -&gt; CPU jumps to <strong>Interrupt Handler</strong> in the OS. -&gt; wake up A</p>
<ul>
<li>Pro: no waste of CPU cycles</li>
<li>Con: expensive context switch (polling can be better for fast devices since $T(I&#x2F;O)&lt;T(context switch)$)<blockquote>
<ol>
<li>Same mechanism is used for demand paging</li>
<li>A is waken up by <strong>interrupt handler</strong></li>
</ol>
</blockquote>
</li>
</ul>
<blockquote>
<p>NOTICE: <strong>Interrupt</strong> is generated by the hardware to initiate a context switch(switching between user and kernel mode). <strong>Syscall</strong> is generated by the process to request functionality from kernel mode, also initiates a context switch(switching between user and kernel mode). <strong>Trap</strong> goes from user space to kernel space.</p>
</blockquote>
</li>
</ul>
<h3 id="How-to-handle-different-devices-in-OS"><a href="#How-to-handle-different-devices-in-OS" class="headerlink" title="How to handle different devices in OS?"></a>How to handle different devices in OS?</h3><p>The problem is that each device may have its own protocol(The interface is specific).</p>
<p><strong>Solution: Abstraction</strong>:<br>Adding a layer of abstraction between OS and devices: device driver.</p>
<ul>
<li>Device driver creates a connection between each device and the OS.</li>
<li>Each device needs its own driver</li>
<li>Device driver is a piece of software in OS</li>
</ul>
<p><img src="/.com//3.png"></p>
<h2 id="Permanent-Storage"><a href="#Permanent-Storage" class="headerlink" title="Permanent Storage"></a>Permanent Storage</h2><ul>
<li>Permanent across machine failures&#x2F;restarts</li>
<li>Permanent across disk failures</li>
</ul>
<p><strong>Permanent Storage Media</strong>:<br>Flash SSD, HDD, …</p>
<h3 id="File-System-API"><a href="#File-System-API" class="headerlink" title="File System API"></a>File System API</h3><h4 id="FILE"><a href="#FILE" class="headerlink" title="FILE"></a>FILE</h4><ul>
<li>An un-intepreted collection of objects composed of bytes, records,etc.<ul>
<li>un-intepreted: File system does not know the meaning of the data; only application does</li>
</ul>
</li>
</ul>
<p><strong>Type</strong>:<br>Typed &#x3D; File System knows what the object means<br><em>(Sometimes, the file type is distinguiished by file extensions but it actually depends on the OS itself: UNIX ignore the extension, Windows does not ignore)</em></p>
<ul>
<li>Pro: prevent errors; efficient storage</li>
<li>Con: inflexible; lot of code</li>
</ul>
<blockquote>
<p>We only look <strong>untyped</strong> files in this course</p>
</blockquote>
<h3 id="File-System-Primitives"><a href="#File-System-Primitives" class="headerlink" title="File System Primitives"></a>File System Primitives</h3><p><strong>Checking the lecture</strong></p>
<ul>
<li>Access</li>
<li>Concurrency</li>
<li>Naming</li>
<li>Protection</li>
</ul>
<h4 id="ACCESS"><a href="#ACCESS" class="headerlink" title="ACCESS"></a>ACCESS</h4><p><strong>Sequential &amp; Random Access</strong>  </p>
<ul>
<li>Sequential:<br>A portion of the file is read in order. If the read(write) is suspended and restart, it will continue at the last suspension point.</li>
<li>Random:<br>No connection between accesses in different times.</li>
</ul>
<blockquote>
<p>Read() itself is random access but we can use file pointer to convert it into sequential access.</p>
</blockquote>
<blockquote>
<p>Sequential access is very common and all OS provide it. Not all OS provide random access.(but they may provide seek())</p>
</blockquote>
<h4 id="CONCURRENCY-concueerent-sequential-access"><a href="#CONCURRENCY-concueerent-sequential-access" class="headerlink" title="CONCURRENCY(concueerent sequential access)"></a>CONCURRENCY(concueerent sequential access)</h4><p>Two processes access the same file.<br>Use <code>Open()</code> and <code>Close()</code> to deal with the situation.</p>
<p>The combination of <code>Open()</code> and <code>Read()</code> is easy; however, the combination of <code>Open()</code> to <code>Write()</code> is tricky since the file itself is being modified as writing.</p>
<ul>
<li>Seperate file instances altogether<br>Writes by one process not visible to others.</li>
<li>Seperate file instances until Close()<br>Write visible after Close(), OS decides the merging</li>
<li>Single instance of the file<br>Writes visible immediately to others<blockquote>
<p>In all cases, fp is private.</p>
</blockquote>
</li>
</ul>
<h4 id="NAMING"><a href="#NAMING" class="headerlink" title="NAMING"></a>NAMING</h4><p><strong>Naming primitives</strong><br>Naming &#x3D; mapping : human-redable string -&gt; uid<br>Directory(folder) &#x3D; collection of mappings(namings)</p>
<p><strong>Directory Structure</strong></p>
<ul>
<li>Flat structure</li>
<li>Two-level structure</li>
<li>Hierarchical<br>Hierarchical directory structure can have different shapes(data structure)<br>EXP: tree, acyclic graph(acyclic graph enables short cut creation compared to tree)<blockquote>
<p>Shortcut creation(in Linux): Hard Link &amp; Soft Link<br><strong>Hard Link</strong>: Creates a new mapping of a string to the existing UID<br><strong>Soft Link</strong>: Creats a new mapping of a string to the existing string<br><img src="/.com//4.png" alt="Def"><br><img src="/.com//5.png" alt="Difference"></p>
</blockquote>
</li>
</ul>
<h4 id="LINUX-PRIMITIVES"><a href="#LINUX-PRIMITIVES" class="headerlink" title="LINUX PRIMITIVES"></a>LINUX PRIMITIVES</h4><p>Collapses in a single interface of the previous primitives.</p>
<blockquote>
<p>UID is nerver visible at the user level!!</p>
</blockquote>
<h3 id="Disks"><a href="#Disks" class="headerlink" title="Disks"></a>Disks</h3><p><img src="/.com//6.png" alt="Structure of DISK"><br>Each platter has two surfaces, each surface has its own tracks; each track has its own sectors.<br>Cylinder: a logical grouping of tracks (same distance from the spindle)<br><img src="/.com//61.png" alt="Structure of DISK"><br><img src="/.com//62.png" alt="Structure of DISK"></p>
<p><strong>Disk Interface</strong><br>Disk interface is accessible by sector only.</p>
<hr>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/COMP310/" style="color: #ffa2c4">
                COMP310
            </a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/Lecture-Notes/" style="color: #00bcd4">
                Lecture Notes
            </a>
        </span>
        
    </div>
    <a href="/2023/03/25/COMP310-Intro-to-FileSystems/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/03/06/COMP310-MemoryManagement-DemandPaging/">
        <h2 class="post-title">COMP310_MemoryManagement:DemandPaging</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/COMP310/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                COMP310
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/3/6
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h3 id="Memory-Management-Demand-Paging"><a href="#Memory-Management-Demand-Paging" class="headerlink" title="Memory Management: Demand Paging"></a>Memory Management: Demand Paging</h3><p>For system using right now, most are based on paging instead of segmentation or base&amp;bounds.</p>
<ul>
<li>Base&amp;Bounds &#x3D;&gt; used only for niche</li>
<li>Segmentation &#x3D;&gt; abandoned<ul>
<li>high complexity for little gain</li>
<li>Effect approximated with paging + valid bits</li>
</ul>
</li>
<li>Paging &#x3D;&gt; <strong>universal</strong></li>
</ul>
<p><em><strong>Segmentation can be compacted but hard to manage. Segmentation usually used in embedded development.</strong></em></p>
<h4 id="Paging"><a href="#Paging" class="headerlink" title="Paging"></a><strong>Paging</strong></h4><p><strong>Terminology:</strong><br>  Page: fixed-size portion of virtual memory<br>  Frame: fixed-size portion of physical memory<br>  Page size &#x3D; Frame size<br>  Typical size: 4k-8k (always power of 2)  </p>
<ul>
<li>Virtual address space<br>Linear from 0 up to a multiple of page size</li>
<li>Physical address space<br>Non-contiguous set of frames, one per page</li>
<li>Virtual Address<ul>
<li>Two components in the virtual address :<br>VPN:Virtual page number<br>Offser:offset within the page (page size &#x3D; $2^{offset}$ <strong>Bytes</strong>)</li>
<li><strong>VPN</strong> –(Address Translation(MMU))–&gt;<strong>PFN(Physical Frame Number)</strong></li>
</ul>
</li>
<li>MMU<ul>
<li>Page Table<ul>
<li>Page table is the data structure mapping VPN to PFN.</li>
<li>Each process has a page table. -&gt; each time we do a context switch, the page table needs to be switched also</li>
</ul>
</li>
<li>MMU need a pointer to page table in memory and the length of the page table</li>
</ul>
</li>
</ul>
<h5 id="Advantage-amp-Disadvantage"><a href="#Advantage-amp-Disadvantage" class="headerlink" title="Advantage &amp; Disadvantage"></a><strong>Advantage &amp; Disadvantage</strong></h5><ul>
<li>Advantage: easier to implemented compared to segmentation  with compaction</li>
<li>Disadvantage: <ul>
<li>P1: may have free(null) page &#x3D; sparsely used page may appears &#x3D; internal fragmentation $\Rightarrow$ external fragmentation<br><strong>The severity of this problem depends on the page size</strong></li>
<li>P2: Low translation performance (virtuial address -&gt;page table(in main emory)-&gt;accession(in main memory)) &#x3D; reducing performance by factor of 2</li>
</ul>
</li>
</ul>
<h6 id="Solution-to-P1-valid-x2F-invalid-bit"><a href="#Solution-to-P1-valid-x2F-invalid-bit" class="headerlink" title="Solution to P1: valid&#x2F;invalid bit"></a><strong>Solution to P1: valid&#x2F;invalid bit</strong></h6><p>We can denote the corresponding pages with a valid bit to indicate whether its used or not. (<strong>Used for valid bit, unused for invalid bit</strong>)<br><strong>This actually means the page table itself no longer covers the entire virtual address space(all possible pages in thrtual memory) but the allocated pages by the process.</strong></p>
<h6 id="Solution-to-P2-TLB-Translation-Lookaside-Buffer"><a href="#Solution-to-P2-TLB-Translation-Lookaside-Buffer" class="headerlink" title="Solution to P2: TLB(Translation Lookaside Buffer)"></a><strong>Solution to P2: TLB(Translation Lookaside Buffer)</strong></h6><p>TLB(Translation lookaside buffer) is a part of MMU which makes the map(translation from virtual address(page number) to physical address) fast.  </p>
<p>Part of the page table is in the MMU(TLB). If the map is in it, we get a “hit”, thus no need to find in memory for the map again. If a miss happened, we need to find it in the memory.</p>
<blockquote>
<p>Page Table is stored in main memory and MMU has a pointer to it with the length. TLB is not in main memory but in MMU.</p>
</blockquote>
<blockquote>
<p>Notice that actually finding in memory is by use TLB again.</p>
</blockquote>
<p><img src="/.com//11111.png"><br><img src="/.com//22.png" alt="TLB MISS1"><br><img src="/.com//23.png" alt="TLB MISS2"></p>
<p><strong>The hardware basis of TLB</strong><br>Use <strong>associative memory</strong>(special hardware)  </p>
<ul>
<li>Regular Memory -&gt; lookup by address</li>
<li>Associative Memory -&gt; lookup by contents &amp; lookup in parallel(lookup all at the same time)</li>
</ul>
<p><img src="/.com//01.png" alt="Regular Memory"><br><img src="/.com//02.png" alt="Regular Memory"><br><em>Key &#x3D; Pageno , Value &#x3D; Frameno</em></p>
<p><strong>TLB Size</strong><br>TLB is expensive and small(64-1024 entries)<br>Want TLB hit rate close to 100%<br>If TLB full, need to replace existing entry</p>
<p><strong>TLB Hit Rate and Locality</strong> </p>
<ul>
<li>Temporal Locality -&gt; An instruction that has been accessed will be re-accessed soon in the future</li>
<li>Spatial Locality -&gt; An instruction is accessed, then the instructions near to it will likely soon be accessed<blockquote>
<p>Accession to an array can be both an example to spatial locality and temporal locality</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>They are used together most of the time but may depend.</p>
</blockquote>
<h5 id="Process-Switching-with-TLB"><a href="#Process-Switching-with-TLB" class="headerlink" title="Process Switching with TLB"></a><strong>Process Switching with TLB</strong></h5><h6 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a><strong>Problem</strong></h6><p>Inability to distinguish between pageno of different processes in TLB.<br><img src="/.com//33.png" alt="TLB PROBLEM"></p>
<h6 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a><strong>Solution</strong></h6><ul>
<li>Invalidation of TLB : invalidate all TLB entries(by valid bits) as switching<ul>
<li>Pro: Simply requires one Valid Bit</li>
<li>Con: process switch expensive</li>
<li>Con: new process incurs 100% TLB misses</li>
</ul>
</li>
<li>Process Identifier : add process identifier to TLB entries<ul>
<li>Con: complicated</li>
<li>Pro: cheaper</li>
</ul>
</li>
</ul>
<hr>
<h4 id="Computation-for-the-size-of-TLB"><a href="#Computation-for-the-size-of-TLB" class="headerlink" title="Computation for the size of TLB"></a><strong>Computation for the size of TLB</strong></h4><p><em><strong>Check the lecture</strong></em><br><img src="/.com//44.png" alt="COMPUTATION"></p>
<blockquote>
<p>Explanation:<br>4kB Pages &#x3D;&gt; The <u>number of entries</u> in a <strong>page</strong> is 4kB(4028).<br>Page table entries &#x3D;&gt; number of entries in a <strong>page table</strong><br>Every page table entry &#x3D;&gt; the <strong>size</strong> of each table entry in the main memory</p>
</blockquote>
<h4 id="How-to-make-Page-Table-Smaller"><a href="#How-to-make-Page-Table-Smaller" class="headerlink" title="How to make Page Table Smaller?"></a><strong>How to make Page Table Smaller?</strong></h4><ul>
<li>Big Pages</li>
<li>Segmentation + Paging</li>
<li>Multi-level page tables</li>
</ul>
<h5 id="Big-Pages"><a href="#Big-Pages" class="headerlink" title="Big Pages"></a><strong>Big Pages</strong></h5><p>Advantage: Easy to implement<br>Disadvantage: Larger internal fragmentation<br><em><strong>Most systems use 4KB or 8KB pages in common sense</strong></em></p>
<h5 id="Segmentation-Paging"><a href="#Segmentation-Paging" class="headerlink" title="Segmentation + Paging"></a><strong>Segmentation + Paging</strong></h5><p>Divide address space into segments, than devide each segment into fixed-sized pages.<br>Virtual address divided into three portions:</p>
<table><tr><td>seg</td><td>page number</td><td>page offsers</td></tr></table>

<p>Advantage:  </p>
<ul>
<li>Supports sparse address spaces<ul>
<li>decrease size of page tables</li>
<li>if segment not used, not need for page table</li>
</ul>
</li>
<li>enable sharing</li>
<li>No external fragmentation</li>
</ul>
<p>Disadvantage: </p>
<ul>
<li>each segment <strong>might</strong> have large page table</li>
<li>must allocate each page table contiguously</li>
</ul>
<h5 id="Multi-level-Page-Tables"><a href="#Multi-level-Page-Tables" class="headerlink" title="Multi-level Page Tables"></a><strong>Multi-level Page Tables</strong></h5><p>Turns the linear page table into tree structure. The level is not limited.<br><img src="/.com//55.png"><br><img src="/.com//56.png"></p>
<hr>
<h4 id="Leaving-the-assumption"><a href="#Leaving-the-assumption" class="headerlink" title="Leaving the assumption"></a>Leaving the assumption</h4><p>Previous discussion is based on the assumption that the <strong>whole program</strong> resides in the memory. However, now we are dropping this assumption.</p>
<ul>
<li>Impossible to reside a program in a memory if it’s huge</li>
<li>Only needed pieces need to be resided &lt;&#x3D; load the needed pieces from the file system &#x3D;&gt; many advantages(multiple programs running in a memory&amp;load useful pieces only)</li>
</ul>
<h5 id="Swapping"><a href="#Swapping" class="headerlink" title="Swapping"></a>Swapping</h5><p><strong>Def</strong>:<br> Store the <strong>whole program</strong> temporarily on the disk to get rid of one or more processes.<br><strong>Explanantion</strong>:<br>Processes running on the OS resides on disk; whenever the <strong>scheduler</strong>(context switching) decides one to run, the <strong>whole process</strong> switch into the memory from disk.(also the same for switching out)<br><strong>Disadvantage</strong>:  </p>
<ul>
<li>High latency since need to read from disk(~100million cycles).</li>
<li>Parallelism disabled if the program switching in is huge.<br><strong>Solution</strong>:<br>Demand Paging</li>
</ul>
<h5 id="Demand-Paging"><a href="#Demand-Paging" class="headerlink" title="Demand Paging"></a>Demand Paging</h5><p><strong>Difference with swapping</strong>:  </p>
<ul>
<li>Swapping &#x3D; all of the program is in memory or all of the program is on disk</li>
<li>Demand paging &#x3D; part of program is in memory</li>
</ul>
<p><strong>Reason for use demand paging</strong>:</p>
<ol>
<li>We want to create an illusion for the program that it has a huge memory space(virual memory space &gt;&gt; physical memory space)</li>
<li>Shorter process startup latency<ul>
<li>start process with part of them in memory (Even 1 page suffices)</li>
</ul>
</li>
<li>Better use of main memory<ul>
<li>Enable parellelism of running multiple programs</li>
</ul>
</li>
</ol>
<p><strong>Location of the program</strong>:<br>Part of it is in memory but most of it is on disk(a special partition called <strong>backing store</strong>(<em>only the OS has the access to the backing store</em>)).</p>
<blockquote>
<p>NOTICE: Backing store has all the page information of a program.</p>
</blockquote>
<blockquote>
<p>NOTICE: CPU only directly access memory. CPU access data on disk through OS(OS connect page to the resding backings store).</p>
</blockquote>
<p><strong>High-level Mechanism</strong>:  </p>
<ul>
<li>Page fault:<br>Program needs to access part only on disk</li>
<li>Page fault handling:<br>The process for the OS to handle the page fault: program suspended -&gt; OS runs and gets page from disk -&gt; program is restarted</li>
</ul>
<ol>
<li><p>Discover Page Fault<br>Idea: Using the valid bit in page table</p>
<ul>
<li>With demand paging:<br> <em>(Exception from the following situation raise error of the OS)</em><br> Valid bit &#x3D; 0: page is invalid OR <strong>page is on disk</strong><br> Valid bit &#x3D; 1: page is valid AND <strong>page is in memory</strong><br> (indicates more info needed for the OS (Invalid&#x2F;on-disk?))</li>
</ul>
</li>
<li><p>Suspendisng thne Faulting Process<br>Idea: Trap into the OS</p>
<ul>
<li>invalid bit access generates trap</li>
<li>Process info stored into the PCB and suspend the process(to increas the efficiency of the CPU)<blockquote>
<p>Trapping: Making the switch between the user mode and the kernel mode.</p>
</blockquote>
</li>
</ul>
</li>
<li><p>Getting the page from the disk<br>Idea: OS handles fetchs from disk</p>
<ul>
<li><p>Allocate the free frame(if exist) in memory to the process</p>
</li>
<li><p>Find page on disk and transfer the page from disk to frame</p>
<ul>
<li>Two tables are needed here for transferring: Extra table mapping page to backing store</li>
</ul>
</li>
<li><p>While the disk is Busy</p>
<ul>
<li>invoke scheduler to run another process</li>
<li>when disk interrupt arrives, suspend the running process and get back to page default handling</li>
</ul>
</li>
</ul>
</li>
<li><p>Completing page fault handling</p>
<ul>
<li>set the introduced page to valid and assign it a frame number(renew page table)</li>
<li>set process state to ready</li>
<li>invoke scheduler &#x3D;&gt; next time to run will try toaccess the page again</li>
</ul>
</li>
</ol>
<p><img src="/.com//60.png" alt="Demand Paging Summary1"><br><img src="/.com//61.png" alt="Demand Paging Summary2"></p>
<p><strong>How to find a free frame in the main memory?</strong><br>If no free frame available, pick a frame to be replaced -&gt; invalidates its page table entry and TLB entry -&gt; write the frame to disk</p>
<blockquote>
<p>NOTICE: No worry of loosing information by replacing since all pages are stored in backing store.</p>
</blockquote>
<p><strong>How to pick the page&#x2F;frame to replace?(raplacing policies)</strong></p>
<ul>
<li>Random</li>
<li>FIFO</li>
<li>OPT</li>
<li>LRU</li>
</ul>
<p>Goal: minimizing the page fault since they slow down the program</p>
<p><strong>Random</strong> (Relatively universal)<br>Random page is replaced.  </p>
<ul>
<li>PRO: Easy to implement  </li>
<li>CON: Does not take advantage of spatial&#x2F;temporal locality</li>
</ul>
<p><strong>FIFO</strong><br>Oldest page is replaced.(The first one brough into memory)</p>
<ul>
<li>PRO: Easy to implement, Fair</li>
<li>CON: Does not account of “hot” pages</li>
</ul>
<p><strong>OPT(An optimal algorithm)</strong><br>Replace the page that will be referenced the furthest in the future.(OPT insetad of approximated OPT)</p>
<ul>
<li>PRO: Provably optimal</li>
<li>CON: Hard to implement(Can’t predict)<blockquote>
<p>OPT always acts as a basis of comaprison for other algorithms</p>
</blockquote>
</li>
</ul>
<p><strong>LRU(Least Recently Used)</strong><br>Use the past information to predict future usage</p>
<ul>
<li>PRO: Approximate OPT</li>
<li>CON: Hard to implement, does not handle all workloads well<br><img src="/.com//70.png" alt="LRU Hardware Support"></li>
</ul>
<p>是否virtual address包含了在硬盘上的部分而并没有对于物理内存形成一个完全的一一映射？</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/COMP310/" style="color: #ffa2c4">
                COMP310
            </a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/Lecture-Note/" style="color: #00bcd4">
                Lecture Note
            </a>
        </span>
        
    </div>
    <a href="/2023/03/06/COMP310-MemoryManagement-DemandPaging/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/03/05/COMP310-MemoryManagement-VM/">
        <h2 class="post-title">COMP310_MemoryManagement_VM</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/COMP310/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                COMP310
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/3/5
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h3 id="Memory-Management-Virtual-Memory"><a href="#Memory-Management-Virtual-Memory" class="headerlink" title="Memory Management: Virtual Memory"></a>Memory Management: Virtual Memory</h3><p>The core conception in memory management is of <strong>address space mapping</strong>.<br>Difference between physical memory and virtual one is: the virtual must be continuous but physical can be fragmental.</p>
<h4 id="Dreamy-Memory"><a href="#Dreamy-Memory" class="headerlink" title="Dreamy Memory"></a><strong>Dreamy Memory</strong></h4><p>The OS tries to make an illusion of using memory of the following properties(desired): <code> private, infinitely large, infinitely fast, nonvolatile, cheap memory</code>.</p>
<h4 id="Memory-Hierarchy"><a href="#Memory-Hierarchy" class="headerlink" title="Memory Hierarchy"></a><strong>Memory Hierarchy</strong></h4><p>However, in real world, the memory follows the hierarchy:</p>
<table>
<tr><th colspan="5"><b>Faster access from left to right, higher price from left to right</b></th></tr>
<tr><td>Registers(1 cycle)</td>
<td>Cache(~10 cycles)</td>
<td>Main Memory(~100 cycles)</td>
<td>Flash Disk(~1M cycles)</td>
<td>Traditional Disk(~10M cycles)</td>
</tr>
<tr><td colspan="3" align="center">Primary Storage</td></tr><tr><td colspan="2" align="center">On CPU</td></tr>
<tr><td colspan="2" align="center">Not cared by OS</td><td colspan="3" align="center">cared by OS(OS memory management)</td></tr>
</table>

<p><em>Cycle here can be interpreted as nano-second(a speed measurement)</em></p>
<h4 id="Goals-of-OS-Memory-Management"><a href="#Goals-of-OS-Memory-Management" class="headerlink" title="Goals of OS Memory Management"></a><strong>Goals of OS Memory Management</strong></h4><p><em>Every access to memory is in virtual instead of physical one, due to the virtual <strong>mapping</strong> by OS.</em></p>
<ol>
<li>Main memory allocation<ul>
<li>location of kernel in address space</li>
<li>what memory to allocate processes</li>
<li>how many processes to allow</li>
</ul>
</li>
<li>Protection(Segeregation)<ul>
<li>no corruption to OS and other processes</li>
<li>Privacy: can’t read data from other processes</li>
</ul>
</li>
<li>Transperancy<ul>
<li>Illusion of private memory for each process</li>
</ul>
</li>
</ol>
<h4 id="Protection"><a href="#Protection" class="headerlink" title="Protection"></a><strong>Protection</strong></h4><p>Protection to be leaded to prevent trespassing access to memory space.<br>The general idea is to add a <strong>check</strong> in the course of accession.</p>
<blockquote>
<p>The <strong>check</strong> is a hardware device (<strong>MMU</strong> Memory Management Unit).</p>
</blockquote>
<h4 id="Transparency"><a href="#Transparency" class="headerlink" title="Transparency"></a><strong>Transparency</strong></h4><p>Essence is to make sure the running of process won’t cause confliction.(no worry of actual running space)</p>
<h4 id="Main-Memory-Allocation"><a href="#Main-Memory-Allocation" class="headerlink" title="Main Memory Allocation"></a><strong>Main Memory Allocation</strong></h4><h5 id="Where-to-allocate-the-kernel"><a href="#Where-to-allocate-the-kernel" class="headerlink" title="Where to allocate the kernel?"></a>Where to allocate the kernel?</h5><p>In the low memory address. The reason is the <strong>interrupt vectors</strong>(the address mapping of hardware device of transferring between user and kernel mode) are in the low memory.</p>
<h5 id="Physical-and-Virtual-Memory"><a href="#Physical-and-Virtual-Memory" class="headerlink" title="Physical and Virtual Memory"></a><strong>Physical and Virtual Memory</strong></h5><p>The early days OS runs only single process at a time which is trusted so no virtual(logical) memory is needed; the process directly access the physical memory.<br>However, if the <u>process is malicious(tresspass into the kernel)</u> or there <u>are multiple processes runs at the sam time</u>, the model won’t work. Thus, logical(virtual) memory is needed.</p>
<ul>
<li>Virtual&#x2F;logical address space &#x3D; what the program thinks is its memory</li>
<li>Physical address space &#x3D; actually is its memory(residing physically)</li>
</ul>
<p>CPU(process) –(<strong>generates virtual address space</strong>)–&gt; MAP(MMU) –(Transfer)–&gt; Memory(Physical Address)</p>
<h5 id="Mapping-Scheme"><a href="#Mapping-Scheme" class="headerlink" title="Mapping Scheme"></a><strong>Mapping Scheme</strong></h5><p><strong>Classification</strong></p>
<ul>
<li>Base and Bounds</li>
<li>Segmentation</li>
<li>Paging</li>
</ul>
<p>For each scheme, we need to understand: <code>physical address space, virtual address space, virtual address, MMU.</code></p>
<h6 id="Base-and-Bounds"><a href="#Base-and-Bounds" class="headerlink" title="Base and Bounds"></a><strong>Base and Bounds</strong></h6><ul>
<li>Virtual Address Space<br>Linear address space: from 0 to MAX  </li>
<li>Physical Address Space<br>Linear address space: from BASE to BOUNDS &#x3D; BASE + MAX<br>MMU</li>
<li>MMU<br>MMU check <strong>relocation register(holds the base value)</strong> and <strong>limit register(holds the bounds value)</strong>. </li>
<li>Free Space Distribution<br>OS will allocate the new process to the <strong>holes(space which is free)</strong>.<br><em>Free list : A list of the range of the physical memory not in use.</em><ul>
<li>Method<ul>
<li>Take first hole bigger than requested</li>
<li>The smallest hole bigger than requested</li>
<li>The largest hole -&gt; tries to eliminate many unusable smallest holes</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>The problem of base and bounds is there may be huge “free space” occupied by the process in the memory that can’t be reallocated <strong>(internal fragmentation problem)</strong>.<br>One solution is to implement by segmentation.</p>
</blockquote>
<h5 id="Segmentation"><a href="#Segmentation" class="headerlink" title="Segmentation"></a><strong>Segmentation</strong></h5><p>In stead of treat one program as a chunk in address space, we segmented it in <strong>three parts: Code, Heap, Stack</strong> which can grow dynamically.</p>
<blockquote>
<p>The segmentation has many ways, the above 3 parts is only one of them.</p>
</blockquote>
<p>Can be treated as multiple base and bounds.</p>
<ul>
<li><p>Virtual Address Space<br>Two-dimensional space with set of segements and each segment ‘i’ is linear from 0 to MAX(i)</p>
</li>
<li><p>Set of segments, each linear</p>
<blockquote>
<p>The order of the segments in physical space has no need to be the same as in virtual address space.</p>
</blockquote>
</li>
<li><p>Virtual Address (Structure)<br><em>Check Lecture</em><br><strong>Segment + Offset</strong><br>–&gt; Number of <strong>segment bits + offset bits</strong> &#x3D; <strong>virtual memory address bits</strong></p>
</li>
<li><p>MMU</p>
<ul>
<li>Segment table<br>Indexed by segment number<br>contains <strong>(base,limit pair)</strong><ul>
<li>base: physical address of segment in memory(where the segment starts)</li>
<li>limit: length of the segment</li>
</ul>
</li>
<li>Pointer to segment table in memory</li>
<li>length of segment table<blockquote>
<p>notice a recursive use in MMU</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h6 id="Advantage-and-Disadvantage"><a href="#Advantage-and-Disadvantage" class="headerlink" title="Advantage and Disadvantage"></a><strong>Advantage and Disadvantage</strong></h6><ul>
<li>Disadvantage<br>Segmentation requires the segmentation table(a data structure) to be stored in MMU, which is convoluted.</li>
<li>Advantage<br>The segmentation table actually enables memory sharing between processes.<br><em><strong>Sharing is not possible with base&amp;bounds but possible with segmentation.</strong></em></li>
</ul>
<h6 id="Memory-Sharing"><a href="#Memory-Sharing" class="headerlink" title="Memory Sharing"></a><strong>Memory Sharing</strong></h6><p>Memory sharing in segementation can be easily reached by having the same point address in the segmentation table.</p>
<p><strong>Protection Bits</strong><br>To guarantee the <strong>protection property of memory allocation of OS</strong> in the course of memory sharing, <strong>protection bits</strong> by <strong>extra hardware support</strong> are needed.<br>Protection bits is a few more bits <strong>per segment</strong> indicating the permission of <strong>read, write,and execute</strong>.</p>
<hr>
<h5 id="Compaction"><a href="#Compaction" class="headerlink" title="Compaction"></a><strong>Compaction</strong></h5><p>Compaction is a way to solve fragmentation problems(holes) in the physical memory. It can be used in both base&amp;bounds and segmentation.<br>However, compaction is inefficient:</p>
<ul>
<li>Process needs to be stopped for rearranging</li>
<li>data need to be copied to somewhere</li>
<li>MMU table changed</li>
</ul>
<p>Besides, if a segment is needed to be expanded after compaction, the compaction needs to be restarted again.</p>
<hr>
<blockquote>
<p>NOTICE:<br>  The info of mapping is all stored in MMU.<br> Internal fragmentation only appears in base&amp;bounds since in segmentation the virtual spaces are all occupied. But external fragmentation happens in both.</p>
<p>Internal Fragmentation: can take free space inside the virtual memory space<br>External Fragmentation: there’s holes(free space) in the physical memory</p>
</blockquote>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/COMP310/" style="color: #00a596">
                COMP310
            </a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/Lecture-Notes/" style="color: #03a9f4">
                Lecture Notes
            </a>
        </span>
        
    </div>
    <a href="/2023/03/05/COMP310-MemoryManagement-VM/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/03/04/COMP310-SynchroP/">
        <h2 class="post-title">COMP310_SynchroP</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/COMP310/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                COMP310
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/3/4
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h3 id="Synchronization-Primitives-同步原语"><a href="#Synchronization-Primitives-同步原语" class="headerlink" title="Synchronization Primitives 同步原语"></a>Synchronization Primitives 同步原语</h3><h4 id="Concurrency"><a href="#Concurrency" class="headerlink" title="Concurrency"></a><strong>Concurrency</strong></h4><h4 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose"></a><strong>Purpose</strong></h4><p>The motivation for leading into concurrency:</p>
<ul>
<li>CPU trend: Same speed, multiple cores &lt;- destined by Moore’s Law</li>
<li>Goal: write applications fully utilize many cores</li>
</ul>
<h5 id="Option"><a href="#Option" class="headerlink" title="Option:"></a><strong>Option:</strong></h5><ul>
<li>Multiprocess<ul>
<li>apps based on many communicating process</li>
<li>communicate through message passing -&gt; no shared memeory</li>
<li>Pros: One process crashing not affect other processes</li>
<li>Cons: High communication overloads &amp; Expensive context switching</li>
</ul>
</li>
<li>Multithread  <ul>
<li>multiple threads in a process</li>
<li>communicate through memory sharing(shared address space)</li>
<li>Pros: High efficiency</li>
<li>Cons: One crash whole crash</li>
</ul>
</li>
</ul>
<h5 id="Non-Determinism"><a href="#Non-Determinism" class="headerlink" title="Non-Determinism:"></a><strong>Non-Determinism:</strong></h5><ul>
<li>Concurrency leads to non-deterministic results -&gt; depends on CPU scheduler<ul>
<li>Different results with same inputs</li>
<li>Race Conditions</li>
</ul>
</li>
</ul>
<h4 id="Thread"><a href="#Thread" class="headerlink" title="Thread"></a><strong>Thread</strong></h4><h5 id="Def"><a href="#Def" class="headerlink" title="Def"></a><strong>Def</strong></h5><p>The smallest controllable unit of the OS. The essential part of thread is data(memory) sharing.</p>
<h5 id="Difference-to-Process"><a href="#Difference-to-Process" class="headerlink" title="Difference to Process"></a><strong>Difference to Process</strong></h5><ul>
<li>Processes provide seperation -&gt; suitable for coarse interaction</li>
<li>Threads do not provide seperation -&gt; suitable for tighter integration</li>
</ul>
<h5 id="Shared-Data"><a href="#Shared-Data" class="headerlink" title="Shared Data"></a><strong>Shared Data</strong></h5><ul>
<li>Advantage: Many threads can read&#x2F;write it</li>
<li>Dis: Data racing</li>
</ul>
<h6 id="Dara-Racing"><a href="#Dara-Racing" class="headerlink" title="Dara Racing"></a><strong>Dara Racing</strong></h6><ul>
<li>Unwanted access to shared data</li>
<li>result of interleaving of thread executions</li>
<li>program must be correct for all interleavings</li>
</ul>
<p>Data racing is one of the major causes of non-deterministicity of concurrency.  </p>
<h4 id="Synchronization-Primitives"><a href="#Synchronization-Primitives" class="headerlink" title="Synchronization Primitives:"></a><strong>Synchronization Primitives:</strong></h4><p><em>implemented via hardware support in kernel mode</em></p>
<table><tr><td>Software</td><td>Hardware</td></tr>
<tr><td><ul><li>Monitors</li><li>Semaphores</li><li>Locks(mutex)</li><li>Condition Variables</li></ul></td><td><ul><li>Loads</li><li>Stores</li><li>Test&Set</li><li>Disable Interrupts</li></ul></td></tr></table>

<h5 id="Atomization-Mutual-Exclusion"><a href="#Atomization-Mutual-Exclusion" class="headerlink" title="Atomization(Mutual Exclusion)"></a><strong>Atomization(Mutual Exclusion)</strong></h5><p>The aforementioned problem generates the following basic approach to multithreading with the solution:<br><em>The core is atomization(mutual exclusion of critical section).</em> </p>
<ol>
<li>Divide work among multiple threads</li>
<li>Shared data -&gt; Put shared data access in <u>critical section</u>(<strong>atomization</strong>)</li>
</ol>
<h6 id="Purpose-1"><a href="#Purpose-1" class="headerlink" title="Purpose:"></a><strong>Purpose:</strong></h6><p>Prevents simultaneous access to a shared resource(memory region, …);solving critical section problem.</p>
<p>We need library support(pthreads) to achieve mutual exclusion.  </p>
<blockquote>
<p><strong>POSIX Thread Libraries</strong></p>
<ul>
<li>Thread API for C&#x2F;C++</li>
<li>User-level library:<ul>
<li>#include&lt;pthread.h&gt;</li>
<li>Compile and link with <code>-pthread</code></li>
</ul>
</li>
<li>Support for thread creation, termination, synchronization</li>
</ul>
<p>pthread_create();  pthread_exit(); pthread_join()</p>
</blockquote>
<blockquote>
<p><strong>Pthread_Locks:</strong><br>##Notice that the lock itself is a shared variable<br>Pthread_mutex_lock(mutex)<br><em>If lock is held by another thread, block; otherwise, acquire the lock and proceed.</em><br><em><u>This actually means the condition of the lock is always checking. System resource is in use.</u></em><br>Pthread_mutex_unlock(mutex)<br><em>Release the lock</em></p>
</blockquote>
<h6 id="Deadlocks"><a href="#Deadlocks" class="headerlink" title="Deadlocks"></a><strong>Deadlocks</strong></h6><p>Threads are stuck waiting for blocked resources and no amount of retry will help.</p>
<h5 id="Condition-Variables"><a href="#Condition-Variables" class="headerlink" title="Condition Variables"></a><strong>Condition Variables</strong></h5><p>Conditional Variable is a sychronization primitive which is a bit complex than lock.</p>
<ul>
<li>Used when thread A needs to wait for an event done by thread B</li>
<li>A waits until the certain condition is true<ol>
<li>Test the condition</li>
<li>If the condition is not true, call<br> <code>pthread_cond_wait()</code> -&gt; causes A be blocked until the condition is true</li>
</ol>
</li>
<li>At some point B makes the condition true<ol>
<li>Then B calls <code>pthread_cond_signal()</code> -&gt;unblocks A</li>
</ol>
</li>
</ul>
<blockquote>
<p><em>Condition variable is a shared data, so introduce lock(mutex) here.</em></p>
</blockquote>
<blockquote>
<p><strong>Conditional Variables Interface</strong><br>pthread_cond_init(pthread_cond_t *cv, pthread_condattr_t *cattr)</p>
<ul>
<li>Initialize the conditional variable, cattr can be null</li>
</ul>
<p>pthread_cond_wait(pthread_cond_t *cv, pthread_mutex_t *mutex)</p>
<ul>
<li>Block thread until condition is treu, and automatically unblock mutex</li>
</ul>
<p>pthread_cond_signal(pthread_cond_t *cv)</p>
<ul>
<li>Unblock one thread blocked by the conditional variable at random</li>
</ul>
<p>pthread_cond_broadcast(pthread_cond_t *cv)</p>
<ul>
<li>Unblock all threads blocked by the conditional variable</li>
</ul>
</blockquote>
<h6 id="Advantage"><a href="#Advantage" class="headerlink" title="Advantage"></a><strong>Advantage</strong></h6><p>A waits(sleeps) until a certain condition is true; CPU is not busy(not many resources is used).</p>
<h6 id="Two-Problems-for-Naive-Conditional-Variable-and-the-Solution"><a href="#Two-Problems-for-Naive-Conditional-Variable-and-the-Solution" class="headerlink" title="Two Problems for Naive Conditional Variable and the Solution"></a><strong>Two Problems for Naive Conditional Variable and the Solution</strong></h6><p>Check the lecture.</p>
<h4 id="Semaphores"><a href="#Semaphores" class="headerlink" title="Semaphores"></a><strong>Semaphores</strong></h4><p><em>#include&lt;semaphore.h&gt;</em><br>Semaphore is a shared, non-negative counter with two primary operations: wait(attempts to decrement the counter; blocks when the counter is 0),post&#x2F;signal(attempts to increment the counter).  </p>
<blockquote>
<p>Notice that the increment and decrement in semaphore are atomic.  </p>
</blockquote>
<blockquote>
<p>Semaphore value can be initialized upon creation to a positive value, or 0.</p>
</blockquote>
<h5 id="Uses"><a href="#Uses" class="headerlink" title="Uses"></a><strong>Uses</strong></h5><ul>
<li>Mutual exclusion:<br>A semaphore with its counter initialized to 1 is equivalent to a lock.</li>
<li>Bound the currency<br>Initialized to a larger value to bound the # of threads out of N to proceed.</li>
<li>Consumer-Producer Problem</li>
</ul>
<h5 id="interface"><a href="#interface" class="headerlink" title="interface"></a><strong>interface</strong></h5><blockquote>
<p>int sem_init(sem_t *sem,int pshared, unsigned value)<br>int sem_post(sem_t *sem)<br>int sem_wait(sem_t *sem)  </p>
</blockquote>
<hr>
<h4 id="Hardware-Implementation-of-synchronization"><a href="#Hardware-Implementation-of-synchronization" class="headerlink" title="Hardware Implementation of synchronization"></a><strong>Hardware Implementation of synchronization</strong></h4><h5 id="Problem-Specifications"><a href="#Problem-Specifications" class="headerlink" title="Problem Specifications"></a><strong>Problem Specifications</strong></h5><ul>
<li>Safety(no tresspass of protected space)</li>
<li>Liveness(achieved final goal)</li>
</ul>
<h5 id="Lock-Implementation"><a href="#Lock-Implementation" class="headerlink" title="Lock Implementation"></a><strong>Lock Implementation</strong></h5><p>Check lecture for detailed notes.  </p>
<h6 id="Store-amp-Load"><a href="#Store-amp-Load" class="headerlink" title="Store &amp; Load"></a><strong>Store &amp; Load</strong></h6><p>Treat store as a signaling method to indicate the running status of threads; using load to determine if run or not based on status.<br><em>Disadvantage: busy_waiting</em></p>
<h6 id="Disable-Interrupts"><a href="#Disable-Interrupts" class="headerlink" title="Disable Interrupts"></a><strong>Disable Interrupts</strong></h6><p>Thread uses the syscall of LOCK to disable the interrupter in kernel, renable interrupter after finishing.<br><em>Adv: Compared to store&amp;load, thread can be hypnotized</em></p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/COMP310/" style="color: #ffa2c4">
                COMP310
            </a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/Lecture-Notes/" style="color: #ff7d73">
                Lecture Notes
            </a>
        </span>
        
    </div>
    <a href="/2023/03/04/COMP310-SynchroP/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/03/03/COMP310-multithreading/">
        <h2 class="post-title">COMP310_multithreading</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/COMP310/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                COMP310
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/3/3
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h2 id="Multithreading"><a href="#Multithreading" class="headerlink" title="Multithreading"></a><strong>Multithreading</strong></h2><h3 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose"></a><strong>Purpose</strong></h3><p>Still use web server as an example:  </p>
<ol>
<li>to ensure a certain level of security(for example, to guarantee the running code on the server would not disrupt anything), we may use multiprocess since process itself ensures a segregation</li>
<li>if security is guaranteed, multithread can be considered to its efficiency(by shared data)</li>
</ol>
<p><em>Static data tend to be processed by thread, dynamic by process in server.</em></p>
<h3 id="Basic-Approach-to-Multithreading"><a href="#Basic-Approach-to-Multithreading" class="headerlink" title="Basic Approach to Multithreading"></a><strong>Basic Approach to Multithreading</strong></h3><ol>
<li>Divide “work” among multiple threads(based on the property of work per se)</li>
<li>Shared data<ul>
<li>Only <code>global variables</code> and <code>heap</code> can be shared.</li>
<li>shared data accession by critical section</li>
</ul>
</li>
</ol>
<h3 id="Locking"><a href="#Locking" class="headerlink" title="Locking"></a><strong>Locking</strong></h3><p>For example, we may want to have a multithreading program compute the sum and products of elements in two arrays:</p>
<pre><code class="pseudo">main()&#123;
    int i, sum=0, prod=1
    for(i=0;i&lt;MAX_THREADS;i++)&#123;Pthread_create(...)&#125;
    for(i=0;i&lt;MAX_THREADS;i++)&#123;Pthread_join(...)&#125;
    printf(sum)
    printf(prod)
&#125;

Threadcode()&#123;
    int i,c
    for(i=my_min;i&lt;my_max;i++)&#123;
        c = a[i] * b[i]
        sum += c
        prod *= c
    &#125;
&#125;
</code></pre>
<blockquote>
<p><code>htop</code> can be used to check the status of the resources(CPU,memory…) </p>
</blockquote>
<p>We need to implement lock in thread to prevent data racing.<br>The naive way would be to implement biglock:</p>
<pre><code class="pseudo">Threadcode()&#123;
    int i,c
    for(i=my_min;i&lt;my_max;i++)&#123;
        c = a[i] * b[i]
        pthread_mutex_lock(biglock)
        sum += c
        prod *= c
        pthread_mutex_unlock(biglock)
    &#125;
&#125;
</code></pre>
<p>However, it reduces performance since <u>single lock inhibits parallelism</u>. Therefore, two approaches invented to deal with it:  </p>
<ol>
<li>Fine-grain locking:<ul>
<li>Multiple locks on individual pieces of shared data</li>
</ul>
</li>
<li>Privitization<ul>
<li>Make shared data accesses into private data access</li>
</ul>
</li>
</ol>
<h4 id="Fine-Grain-Locking"><a href="#Fine-Grain-Locking" class="headerlink" title="Fine-Grain Locking"></a><strong>Fine-Grain Locking</strong></h4><pre><code class="pseudo">Threadcode()&#123;
    int i,c
    for(i=my_min;i&lt;my_max;i++)&#123;
        c = a[i] * b[i]
        pthread_mutex_lock(sumlock)
        sum += c
        pthread_mutex_unlock(sumlock)
        pthread_mutex_lock(prodlock)
        prod *= c
        pthread_mutex_unlock(prodlock)
    &#125;
&#125;
## 2 lock accesses per thread, per iteration
</code></pre>
<h4 id="Privitization"><a href="#Privitization" class="headerlink" title="Privitization"></a><strong>Privitization</strong></h4><h5 id="Idea"><a href="#Idea" class="headerlink" title="Idea:"></a><strong>Idea:</strong></h5><p>For each thread define the local variables to represent the parts of the global variables; access the loop by the locals. Finally using the lock to the local variables.</p>
<pre><code class="pseudo">Threadcode()&#123;
    int i,c
    local_s =0
    local_p =1
    for(i=my_min;i&lt;my_max;i++)&#123;
        c = a[i] * b[i]
        local_s += c
        local_p *= c
    &#125;
        pthread_mutex_lock(sumlock)
        sum += local_s
        pthread_mutex_unlock(sumlock)
        pthread_mutex_lock(prodlock)
        prod *= local_p
        pthread_mutex_unlock(prodlock)
&#125;
## 2 lock accesses per thread, in total
</code></pre>
<h3 id="Producer-x2F-Consumer-Problem"><a href="#Producer-x2F-Consumer-Problem" class="headerlink" title="Producer&#x2F;Consumer Problem"></a><strong>Producer&#x2F;Consumer Problem</strong></h3><p>Arises when two or more threads communicate with each other.</p>
<h4 id="Def"><a href="#Def" class="headerlink" title="Def:"></a><strong>Def:</strong></h4><p>One shared bounded buffer with N entries. Requirements:  </p>
<ol>
<li>No production when N are all full(harder to deal since info may loss)</li>
<li>No consumption when no entry is full(easy to deal)</li>
<li>Access to the buffer is mutually exclusive(at a time only one process should be able to access the shared buffer and make changes to it)</li>
</ol>
<p><em>Locks cannot deal with it</em></p>
<h4 id="Solution-Semaphores"><a href="#Solution-Semaphores" class="headerlink" title="Solution: Semaphores"></a><strong>Solution: Semaphores</strong></h4><p><em>check the lecture</em></p>
<h5 id="Single-producer-and-consumer"><a href="#Single-producer-and-consumer" class="headerlink" title="Single producer and consumer"></a><strong>Single producer and consumer</strong></h5><p>Requires 2 semaphores:</p>
<ul>
<li>emptyBuffer: initalize to N -&gt; N empty buffers; producer can run N times first</li>
<li>fullBuffer: initialize to 0 -&gt; 0 full buffers; consumer can run 0 times first</li>
</ul>
<h5 id="Multiple-producers-and-consumers"><a href="#Multiple-producers-and-consumers" class="headerlink" title="Multiple producers and consumers"></a><strong>Multiple producers and consumers</strong></h5><hr>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/COMP310/" style="color: #00bcd4">
                COMP310
            </a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/Lecture-Notes/" style="color: #00a596">
                Lecture Notes
            </a>
        </span>
        
    </div>
    <a href="/2023/03/03/COMP310-multithreading/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/03/03/COMP310-multiprocesscom/">
        <h2 class="post-title">COMP310_Multiprocess Communication</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/COMP310/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                COMP310
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/3/3
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="Multiprocess-Communication"><a href="#Multiprocess-Communication" class="headerlink" title="Multiprocess Communication"></a>Multiprocess Communication</h1><p><em>Some is not included.</em></p>
<h3 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose:"></a><strong>Purpose</strong>:</h3><p>Most times, the program(shell,compiler…) we have seen right now only represents one process, with the following structure:<br><code>Code, Globals, Heap, Stack, Registers, PC(Program Counter)  </code><br>However, in complicated cases, we may have one program composed of multiple processes(web server).   <em>In web server, the simplist model comprises two processes, one is used for request fetching, another is for local manipulation.</em></p>
<p>Multiprocess is a way to implement <code>concurrency</code>. The major purpose is still to boost the efficiency for using CPU.</p>
<h3 id="Example-of-Web-Server"><a href="#Example-of-Web-Server" class="headerlink" title="Example of Web Server"></a><strong>Example of Web Server</strong></h3><ol>
<li><p>Simplistic Model (Singel Process)<br><em>in single process, scheduler is inactive</em></p>
<pre><code>WebServerProcess&#123;
 forever&#123;
     wait for incoming request #func 1
     read file from disk #
     send file in response # func 2
 &#125;
&#125;
</code></pre>
</li>
<li><p>After Seperation</p>
<pre><code>Listener&#123;
 forever&#123;
     wait for incoming request
     CreateProcess( worker, request ) # activate Worker
 &#125;
&#125;

WorkerProcess(request)&#123;
 read file from disk
 send response
 exit
&#125;
</code></pre>
<p><em>The idea is to create each worker(process) for a corresponding request to enable the scheduler.</em>  </p>
<h4 id="Amount-of-work-on-server-per-request"><a href="#Amount-of-work-on-server-per-request" class="headerlink" title="Amount of work on server per request:"></a><em><strong>Amount of work on server per request:</strong></em></h4><ul>
<li>Receive network packet(request)</li>
<li>Run listner process</li>
<li>Create worker process -&gt; <em>which can be expensive</em></li>
<li>Read file from disk</li>
<li>Send response</li>
</ul>
<p> To solve the creation cost, we can do preprocess( create some(max) workers as initialization ).</p>
<pre><code>Listener&#123;
    for(i=0; i&lt;MAX_PROCESSES; i++) process[i] = CreateProcess(worker)
forever&#123;
    wait for incoming request
    send(request, process[?]) # use Worker
&#125;
&#125;

WorkerProcess[?]&#123;
forever&#123;
wait for message(&amp;request)
read file from disk
send response
exit
&#125;
&#125;
</code></pre>
</li>
</ol>
<h3 id="IPC-Inter-Process-Communication"><a href="#IPC-Inter-Process-Communication" class="headerlink" title="IPC(Inter Process Communication)"></a><strong>IPC(Inter Process Communication)</strong></h3><h4 id="Purpose-1"><a href="#Purpose-1" class="headerlink" title="Purpose:"></a><strong>Purpose</strong>:</h4><p>To communicate the info between processes.</p>
<p>Two ways to implement IPC:</p>
<ul>
<li>message passing<ul>
<li>By value communication</li>
<li>Never by reference -&gt; seperation of msg in sender and receiver</li>
</ul>
</li>
<li>RPC(remote procedural calls)</li>
</ul>
<p>In Web Server, the IPC is implemented in two fields: inside field(communication between worker and listner) and outside field(communication between client and server).<br><em><strong>notice:</strong><br>in web server, the msg passing is not passed by reference but a new copy created instead. (Indicating memory is not shared)<br>in OS, the msg passing is implemented through the kernel.</em></p>
<h4 id="Message-Passing"><a href="#Message-Passing" class="headerlink" title="Message Passing"></a><strong>Message Passing</strong></h4><p>Ways to implement message passing:  </p>
<ul>
<li>Symmetric Addressing</li>
<li>Asymmetric Addressing</li>
<li>Blocking Receive</li>
<li>Nonblocking Receive</li>
</ul>
<p> <em>Example of asymmetric addressing:</em></p>
<pre><code>  Listener&#123;
      for(i=0; i&lt;MAX_PROCESSES; i++) process[i] = CreateProcess(worker)
  forever&#123;
      client_pid = receive(msg) #receive from any client(always asymmetric)
      msg&#39; = modified msg including client_pid
      send (msg&#39;, worker_process[?])
  &#125;
 &#125;

 WorkerProcess[?]&#123;
  forever&#123;
  receive(msg)
  read file from disk
  send (response, client_pid)
  &#125;
 &#125;
</code></pre>
<p><em>More examples please refer to the lecture</em></p>
<h4 id="RPC-Remote-Procedural-Call"><a href="#RPC-Remote-Procedural-Call" class="headerlink" title="RPC(Remote Procedural Call)"></a><strong>RPC(Remote Procedural Call)</strong></h4><p><code>RPC is based on message passing</code></p>
<h5 id="Purpose-2"><a href="#Purpose-2" class="headerlink" title="Purpose"></a><strong>Purpose</strong></h5><p>causes a procedure(function) to execute in a different address space(commonly another computer on a shared network).</p>
<h5 id="RPC-Interface"><a href="#RPC-Interface" class="headerlink" title="RPC Interface"></a><strong>RPC Interface</strong></h5><p>RPC Interface exposes a list of remotely callable procedures, with their signatures(arguments and return values).<br><em><strong><small>Analogy:</small></strong><br>RPC Server &lt;-&gt; Export file system<br>RPC Client &lt;-&gt; Import file system</em><br><em><strong><small>Problem:</small></strong><br>Message passing $\neq$ procedural call</em><br>So How to bridge the gap?<br>Solution: <code>stub library</code></p>
<h5 id="Stub-Library"><a href="#Stub-Library" class="headerlink" title="Stub Library"></a><strong>Stub Library</strong></h5><p><em>client and server stub are generated automatically, and they are part of the application</em>  </p>
<h6 id="Two-message-types"><a href="#Two-message-types" class="headerlink" title="Two message types:"></a><strong>Two message types:</strong></h6><ul>
<li>Call message<ul>
<li>from client to server</li>
<li>contains argument</li>
</ul>
</li>
<li>Return message<ul>
<li>from server to client</li>
<li>contains return values</li>
</ul>
</li>
</ul>
<h6 id="Mechanism"><a href="#Mechanism" class="headerlink" title="Mechanism:"></a><strong>Mechanism:</strong></h6><p>Client process communicate with server process through RPC interface(which implementing stub library, the stubs are generated automatically through the <code>compiler</code>).</p>
<ol>
<li>Clinet proc call clinet stub</li>
<li>client stub goes to kernel and pass the call message</li>
<li>server stub receive from kernel</li>
<li>server get proc call and execute</li>
</ol>
<h6 id="Message-Format"><a href="#Message-Format" class="headerlink" title="Message Format:"></a><strong>Message Format:</strong></h6><p>Message needs to include not only the basic arguments(pid,arg0,…) but which procedure is called.</p>
<blockquote>
<p><strong>Notice</strong><br>The mechanism of RPC indicates it’s very inefficient to implement it. SO CAREFUL THINKING BEFORE IMPLEMENT IT.</p>
</blockquote>
<h4 id="How-does-this-work"><a href="#How-does-this-work" class="headerlink" title="How does this work?"></a><strong>How does this work?</strong></h4><p>Automatic stub generation:</p>
<ul>
<li>rpcbind<br>universal addresses to RPC program number mapper <pre><code>sudo apt_get install rpcbind
</code></pre>
</li>
<li>rpcgen<br>tool generating remote program interface modules</li>
</ul>
<h3 id="IPC-x2F-LPC-x2F-RPC"><a href="#IPC-x2F-LPC-x2F-RPC" class="headerlink" title="IPC&#x2F;LPC&#x2F;RPC"></a>IPC&#x2F;LPC&#x2F;RPC</h3><p>Reference: <a target="_blank" rel="noopener" href="https://blog.csdn.net/Cmm_CSDN/article/details/86138330">https://blog.csdn.net/Cmm_CSDN/article/details/86138330</a><br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1690556">https://cloud.tencent.com/developer/article/1690556</a></p>
<p>进程通信：</p>
<p>每个进程各自有不同的用户地址空间,<strong>任何一个进程的全局变量在另一个进程中都看不到</strong>，所以进程之间要<strong>交换数据必须通过内核,在内核中开辟一块缓冲区,进程A把数据从用户空间拷到内核缓冲区,进程B再从内核缓冲区把数据读走,内核提供的这种机制称为进程间通信。</strong></p>
<p>进程间通信（IPC，Inter-Process Communication）：<br><strong>IPC（进程间通信）是指在操作系统中，不同进程之间进行通信和同步的机制。</strong><br>特指至少两个进程间传送数据或信号的一些技术或方法。进程是操作系统分配资源的最小单位。每个进程都有自己的一部分独立的系统资源，彼此是隔离的。<strong>为了能使不同的进程互相访问资源并进行协调工作</strong>，才有了进程间通信。<strong>这些进程可以运行在同一计算机上或网络连接的不同计算机上</strong>。进程间通信技术包括消息传递、同步、共享内存和远程过程调用。 IPC是一种标准的Unix通信机制。</p>
<p>有三种主要类型的进程间通信（IPC）：  </p>
<ol>
<li>Message passing<br>消息传递（Message Passing）是一种进程间通信（IPC）机制，它允许进程在不共享相同地址空间的情况下进行通信和同步。它通过发送和接收消息来实现。</li>
<li>远程过程调用（RPC  Reomote Procedure Call）：<br>特指一种隐藏了过程调用时实际通信细节的IPC方法。客户端将调用一个本地方法，而这个本地方法则是负责透明的与远程服务端进行过程间通信。这个本地方法会讲相关参数顺序打包到一个消息中，然后把这个消息发送给服务端提供的方法，服务端的方法会从消息中解出序列化发出来的参数，然后执行，最后仍以同样的方式将方法的返回值发送给客户端</li>
<li>共享内存</li>
</ol>
<p>RPC和MP：<br>本质上，RPC是基于message passing基础之上衍生出来的。这两者之间最核心的区别在于RPC的适用点主要是用于远程过程或函数调用；因此，在消除RPC的函数或过程调用功能后，RPC便和message passing没有本质区别。</p>
<p>LPC：<br>LPC（本地过程调用）是<strong>Windows操作系统中的</strong>一种消息传递机制，用于<strong>同一台计算机</strong>上的两个进程之间的通信。它类似于广泛使用的标准远程过程调用（RPC）机制，但<strong>针对Windows进行了优化</strong>。</p>
<p>LPC与消息传递之间的区别：  </p>
<ol>
<li>应用范围：LPC仅用于Windows操作系统中，而消息传递是一种通用的IPC机制。</li>
<li>优化：LPC针对Windows进行了优化，以提高在同一台计算机上的两个进程之间进行通信的效率。</li>
<li>使用方式：LPC不直接通过Windows API提供，而是作为仅供Windows操作系统组件使用的内部机制。而消息传递则可以通过多种编程语言和平台提供的API直接使用。</li>
</ol>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/COMP310/" style="color: #ffa2c4">
                COMP310
            </a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/Lecture-Notes/" style="color: #03a9f4">
                Lecture Notes
            </a>
        </span>
        
    </div>
    <a href="/2023/03/03/COMP310-multiprocesscom/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/03/01/Markdown-Guide/">
        <h2 class="post-title">Markdown Guide</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Guide/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Guide
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/3/1
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            
            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/Markdown/" style="color: #00bcd4">
                Markdown
            </a>
        </span>
        
    </div>
    <a href="/2023/03/01/Markdown-Guide/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/02/26/Stanford-CS142-C1-HTML/">
        <h2 class="post-title">Stanford_CS142_W1_HTML</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/Lecture-Notes/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Lecture Notes
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/2/26
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <h1 id="CS-142-W1-1-HTML"><a href="#CS-142-W1-1-HTML" class="headerlink" title="CS 142 _ W1_1_HTML"></a>CS 142 _ W1_1_HTML</h1><p><em>This document is singly a lecture  notes for CS 142 and act as a review for basic markdown syntax.</em></p>
<p><strong>Markup Language</strong>:<br>Include directives with content. Is an example of <code>declarative language</code>.<br>The Major purpose for using markup language can be disected into many aspects, but one use can be to focus on the content of the text per se, instead of its formation.<br><em>Two examples of markup langages: Markdown, HTML</em></p>
<p><strong>HTML</strong>(HyperText Markup Language)<br>As noted above, HTML is a type of markup language.<br>Approach for writing HTML:</p>
<ol>
<li>start with contents to be displayed</li>
<li>annotate it with tags</li>
</ol>
<p><strong>HTML Tags:</strong><br>HTML tags provide:  </p>
<ol>
<li>Meaning of text:<ul>
<li><code>&lt;h1&gt;</code> means top-level heading</li>
<li><code>&lt;p&gt;</code> means paragraph</li>
<li><code>&lt;ul&gt; &lt;li&gt;</code> for unordered(bulleted) list</li>
</ul>
</li>
<li>Formatting information(properties of the contents)</li>
<li>Additional information to display(e.g.<code>&lt;img&gt;</code>)</li>
</ol>
<p><em>Tags nestation are supported</em></p>
<p><strong>XHTML(XML-Based HTML)</strong><br>Difference:</p>
<ol>
<li>XHTML is more strict about adhering to proper syntax<ul>
<li>do not ignore unknown tags</li>
<li>do not carry on with syntax errors</li>
<li>do not guess the character missing</li>
</ul>
</li>
</ol>
<p><strong>Basic Syntax of XHTML:</strong><br>Document: hierarchical collection of elements, starting with <code>&lt;html&gt;</code></p>
<ul>
<li>Elements: start tag, contents, end tag  <ul>
<li>start tags can contain <em>attributes</em></li>
</ul>
</li>
</ul>
<p><a href="/2023/02/26/Stanford-CS142-C1-HTML/test_1.html" title="only for test purpose">A test html site.</a><br>&lt;–The document would be renewed in 2023&#x2F;2&#x2F;26 UTC-5–&gt;</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/HTML/" style="color: #03a9f4">
                HTML
            </a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/web-development/" style="color: #00bcd4">
                web development
            </a>
        </span>
        
    </div>
    <a href="/2023/02/26/Stanford-CS142-C1-HTML/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/02/25/Let-s-begin/">
        <h2 class="post-title">Let&#39;s begin</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/test/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                test
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/2/25
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p><strong>it only represents a single test to the publishing functionality to this blog.</strong><br>LaTex Test:<br>\LaTex Basic Math Functionality<br>$$ x + y &#x3D; \sum^{\infty}_{k&#x3D;1}y^k $$</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/test/" style="color: #03a9f4">
                test
            </a>
        </span>
        
    </div>
    <a href="/2023/02/25/Let-s-begin/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/02/25/hello-world/">
        <h2 class="post-title">Hello World</h2>
    </a>
    <div class="category-and-date">
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/2/25
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="bash">$ hexo new &quot;My New Post&quot;
</code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="bash">$ hexo server
</code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="bash">$ hexo generate
</code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="bash">$ hexo deploy
</code></pre>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

            
        </div>
    </div>
    <div class="post-tags">
        
        
    </div>
    <a href="/2023/02/25/hello-world/" class="go-post">阅读全文</a>
</div>


            <div class="page-current">
    <div class="prev">
        
    </div>
    <div class="page-index">
        
        <span class="current">1</span>
        
    </div>
    <div class="next">
        
    </div>
</div>

        </div>
    </div>
    
    <div id="home-card">
        <div id="card-div">
    <div class="card-style" style="width: 300px">
        <div class="avatar">
            <img src="/images/OIP.jpg" alt="avatar">
        </div>
        <div class="name">Terrance</div>
        <div class="description">
            <p>Honor Mathematics &amp; Honor Econ &amp; Honor CS</p>

        </div>
        
        
    </div>
</div>

    </div>
    
</div>

                <footer id="footer">
    <div class="footer-wrap">
        <div>
            &copy;
            2023 - 2023 Aubade_Blog
            <span class="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;Terrance
        </div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp; <a target="_blank" rel="noopener" href="https://github.com/argvchs/hexo-theme-particlex">ParticleX Theme</a></div>
        
    </div>
</footer>

            </div>
            </transition>
            <div id="showimg">
                <img id="showimg-content">
            </div>
        </div>
        <script src="/js/functions.js"></script>
<script src="/js/particlex.js"></script>


    </body>
</html>
